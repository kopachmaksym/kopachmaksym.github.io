<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Simple PWA</title>
    <meta name="theme-color" content="#2b2bff" />
    <link rel="manifest" href="/manifest.json" />

    <style>
        :root { --accent:#2b2bff; font-family: system-ui,Segoe UI,Roboto,Helvetica,Arial; }
        body{ margin:0; padding:1rem; color:#222; }
        header{ display:flex; align-items:center; gap:.75rem; }
        .badge{ background:var(--accent); color:#fff; padding:.25rem .5rem; border-radius:.375rem; }
        .animal-item { background:#f5f5f5; padding:1rem; margin:1rem 0; border-radius:.375rem; border-left:4px solid var(--accent); }
        .animal-item h3 { margin:.5rem 0; color:var(--accent); }
        .animal-item p { margin:.25rem 0; font-size:.9rem; }
    </style>
</head>
<body>
<header>
    <div class="badge">üêæ PWA</div>
    <h1 style="margin:0;font-size:1.25rem;">Animal Shelter</h1>
</header>

<p>–°–ø–∏—Å–æ–∫ –¥–æ–¥–∞–Ω–∏—Ö —Ç–≤–∞—Ä–∏–Ω</p>

<!-- Animals List -->
<div>
    <h2>–°–ø–∏—Å–æ–∫ —Ç–≤–∞—Ä–∏–Ω</h2>
    <div id="animalsList"></div>
</div>

<script>
    const API_URL = 'http://api.animal-id.net/homeless_v1/animal';
    const TOKEN = 'Bearer xeOPS_Es8fXyMw0F5UJjmktPi0CUyV5g'; // –≤—Å—Ç–∞–≤–ª—è—î—à —Å–≤—ñ–π —Ç–æ–∫–µ–Ω

    const animalsList = document.getElementById('animalsList');

    async function loadAnimals() {
        animalsList.innerHTML = '<p>‚è≥ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>';

        try {
            const response = await fetch(API_URL, {
                method: 'GET',
                headers: {
                    'Authorization': TOKEN
                }
            });

            const result = await response.json();

            if (!response.ok || !result.data) {
                animalsList.innerHTML =
                    '<p style="color:red;">‚ùå –ü–æ–º–∏–ª–∫–∞ API: ' + JSON.stringify(result) + '</p>';
                return;
            }

            const animals = result.data;

            if (!animals.length) {
                animalsList.innerHTML = '<p>–ù–µ–º–∞—î —Ç–≤–∞—Ä–∏–Ω</p>';
                return;
            }

            animalsList.innerHTML = animals.map(animal => `
                <div class="animal-item">
                    <h3>${animal.transponder || '–ë–µ–∑ ID'} üêæ</h3>
                    <p><strong>–í–∏–¥:</strong> ${animal.species === 1 ? '–ö—ñ—Ç' : '–°–æ–±–∞–∫–∞'}</p>
                    <p><strong>–°—Ç–∞—Ç—å:</strong> ${['–°–∞–º–∫–∞','–°–∞–º–µ—Ü—å','–ù–µ–≤—ñ–¥–æ–º–æ'][animal.sex] || '-'}</p>
                    <p><strong>–î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó:</strong> ${animal.register_date}</p>
                </div>
            `).join('');

        } catch (err) {
            animalsList.innerHTML =
                '<p style="color:red;">‚ùå –ü–æ–º–∏–ª–∫–∞ –º–µ—Ä–µ–∂—ñ: ' + err.message + '</p>';
        }
    }

    loadAnimals(); // –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Å–ø–∏—Å–æ–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
</script>


</body>
</html>
